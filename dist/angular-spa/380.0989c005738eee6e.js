"use strict";(self.webpackChunkAngularSPA=self.webpackChunkAngularSPA||[]).push([[380],{5380:(q,f,c)=>{c.r(f),c.d(f,{UserHomeModule:()=>L});var p=c(6895),m=c(7163),l=c(2611),u=c(2340),t=c(1571),h=c(6858);let A=(()=>{class n{constructor(e){this.httpService=e,this.apiKey=""}ngOnInit(){this.getApiKey()}getApiKey(){this.httpService.getAuthenticated(u.N.apiUrl+"UserLogin/GetApiKey").subscribe(e=>{this.apiKey=e.apiKey},e=>{})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(h.O))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-api-key"]],decls:4,vars:1,template:function(e,o){1&e&&(t.TgZ(0,"p"),t._uU(1,"Your API key is listed below"),t.qZA(),t.TgZ(2,"p"),t._uU(3),t.qZA()),2&e&&(t.xp6(3),t.Oqu(o.apiKey))}}),n})();var r=c(433);class y{constructor(i,e,o,s){this.creditCardNumber=i,this.expirationMonth=e,this.expirationYear=o,this.securityCode=s}}var g=c(5983),b=c(7185);function _(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"button",7),t.NdJ("click",function(s){t.CHM(e);const a=t.oxw();return t.KtG(a.handlePaymentInformationSubmit(s))}),t._uU(1,"Submit"),t.qZA()}}function F(n,i){1&n&&(t.TgZ(0,"div",8)(1,"span",9),t._uU(2,"Loading..."),t.qZA()())}let C=(()=>{class n{constructor(e,o,s){this.formBuilder=e,this.http=o,this.toast=s,this.paymentInfoForm=this.formBuilder.group({creditCardNumber:["",[r.kI.required,g.rn]],expirationMonth:["",[r.kI.required,r.kI.min(2)]],expirationYear:["",[r.kI.required,r.kI.min(4)]],securityCode:["",[r.kI.required,r.kI.min(3)]]}),this.wasFormSubmitted=!1}ngOnInit(){}handlePaymentInformationSubmit(e){if(!this.wasFormSubmitted&&this.paymentInfoForm.valid){this.wasFormSubmitted=!0;let o=this.getFormData();this.http.postAuthenticated(u.N.apiUrl+"Credit/AddCreditCard",o).subscribe(s=>{this.wasFormSubmitted=!1,this.paymentInfoForm.reset(),this.toast.success("Updated Card Information","")},s=>{this.toast.error("Something went wrong on our end please try again","")})}}getFormData(){return new y(this.paymentInfoForm.value.creditCardNumber,this.paymentInfoForm.value.expirationMonth,this.paymentInfoForm.value.expirationYear,this.paymentInfoForm.value.securityCode)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(r.qu),t.Y36(h.O),t.Y36(b._W))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-payment-information"]],decls:15,vars:3,consts:[[3,"formGroup"],["type","text","id","phone-number-input","aria-describedby","credit-card-number","formControlName","creditCardNumber","placeholder","CC here...",1,"form-control"],["type","text","id","phone-number-input","aria-describedby","credit-card-number","formControlName","expirationMonth","placeholder","Expiration month here...",1,"form-control"],["type","text","id","phone-number-input","aria-describedby","credit-card-number","formControlName","expirationYear","placeholder","Expiration year here...",1,"form-control"],["type","text","id","phone-number-input","aria-describedby","credit-card-number","formControlName","securityCode","placeholder","Security Code here...",1,"form-control"],["type","button","class","btn btn-primary",3,"click",4,"ngIf"],["class","spinner-border text-primary","role","status",4,"ngIf"],["type","button",1,"btn","btn-primary",3,"click"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"]],template:function(e,o){1&e&&(t.TgZ(0,"form",0)(1,"label"),t._uU(2,"Credit Card Number"),t.qZA(),t._UZ(3,"input",1),t.TgZ(4,"label"),t._uU(5,"Expiration Month"),t.qZA(),t._UZ(6,"input",2),t.TgZ(7,"label"),t._uU(8,"Expiration Year"),t.qZA(),t._UZ(9,"input",3),t.TgZ(10,"label"),t._uU(11,"Security Code"),t.qZA(),t._UZ(12,"input",4),t.YNc(13,_,2,0,"button",5),t.YNc(14,F,3,0,"div",6),t.qZA()),2&e&&(t.Q6J("formGroup",o.paymentInfoForm),t.xp6(13),t.Q6J("ngIf",!o.wasFormSubmitted),t.xp6(1),t.Q6J("ngIf",o.wasFormSubmitted))},dependencies:[p.O5,r._Y,r.Fj,r.JJ,r.JL,r.sg,r.u]}),n})();function T(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"input",11),t.NdJ("click",function(s){t.CHM(e);const a=t.oxw();return t.KtG(a.edit2FAPhoneStatus(s))}),t.qZA()}}function v(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"input",12),t.NdJ("click",function(s){t.CHM(e);const a=t.oxw();return t.KtG(a.edit2FAPhoneStatus(s))}),t.qZA()}}function Z(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"button",13),t.NdJ("click",function(s){t.CHM(e);const a=t.oxw();return t.KtG(a.isPhoneNumberValid(s))}),t._uU(1,"Submit"),t.qZA()}}function x(n,i){1&n&&(t.TgZ(0,"div",14)(1,"span",15),t._uU(2,"Loading..."),t.qZA()())}let U=(()=>{class n{constructor(e,o,s){this.formBuilder=e,this.http=o,this.toastr=s,this.apiUrl=u.N.apiUrl+"TwoFA/Get2FAStatus",this.is2FAOn=!1,this.canEdit2FAStatus=!0,this.phone2FAForm=this.formBuilder.group({phoneNumber:["",[r.kI.required,g.xH]]}),this.hasPhoneNumberBeenSubmitted=!1}ngOnInit(){this.GetPhone2FASettings()}handleKeyPressOnPhoneInput(e){e.target.value=e.target.value.replace(/[a-zA-Z!@#$%^&*()_+=-]/g,""),13===e.keyCode&&this.isPhoneNumberValid(e)}isPhoneNumberValid(e){this.phone2FAForm.valid&&!this.hasPhoneNumberBeenSubmitted&&(this.hasPhoneNumberBeenSubmitted=!0,this.http.putAuthenticated(u.N.apiUrl+"TwoFA/UpdatePhoneNumber",this.getPhoneNumberChange()).subscribe(o=>{this.phone2FAForm.reset(),this.toastr.success(o.message,""),this.hasPhoneNumberBeenSubmitted=!1},o=>{this.hasPhoneNumberBeenSubmitted=!1,this.toastr.error(o.error.error,"")}))}getPhoneNumberChange(){return{phoneNumber:this.phone2FAForm.value.phoneNumber}}GetPhone2FASettings(){this.http.getAuthenticated(this.apiUrl).subscribe(e=>{this.is2FAOn=e.result},e=>{this.is2FAOn=!1})}edit2FAPhoneStatus(e){this.canEdit2FAStatus&&(this.canEdit2FAStatus=!1,e.target.checked?this.turn2FAToOn():this.turn2FAToOff())}turn2FAToOn(){this.http.putAuthenticated(u.N.apiUrl+"TwoFA/TurnOn2FA",null).subscribe(e=>{this.canEdit2FAStatus=!0},e=>{this.canEdit2FAStatus=!0})}turn2FAToOff(){this.http.putAuthenticated(u.N.apiUrl+"TwoFA/TurnOff2FA",null).subscribe(e=>{this.canEdit2FAStatus=!0},e=>{this.canEdit2FAStatus=!0})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(r.qu),t.Y36(h.O),t.Y36(b._W))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-two-factor-authentication"]],decls:14,vars:5,consts:[[1,"card"],[1,"card-title","text-center"],[1,"card-body"],[3,"formGroup"],[1,"form-check"],["class","form-check-input","type","checkbox","value","","id","flexCheckDefault",3,"click",4,"ngIf"],["class","form-check-input","type","checkbox","value","","id","flexCheckDefault","checked","",3,"click",4,"ngIf"],["for","flexCheckDefault",1,"form-check-label"],["type","email","id","phone-number-input","aria-describedby","phone-number","formControlName","phoneNumber","placeholder","Phone Number Here...",1,"form-control",3,"keyup"],["type","button","class","btn btn-primary",3,"click",4,"ngIf"],["class","spinner-border text-primary","role","status",4,"ngIf"],["type","checkbox","value","","id","flexCheckDefault",1,"form-check-input",3,"click"],["type","checkbox","value","","id","flexCheckDefault","checked","",1,"form-check-input",3,"click"],["type","button",1,"btn","btn-primary",3,"click"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h3"),t._uU(3,"2FA Security Settings"),t.qZA()(),t.TgZ(4,"div",2)(5,"form",3)(6,"div",4),t.YNc(7,T,1,0,"input",5),t.YNc(8,v,1,0,"input",6),t.TgZ(9,"label",7),t._uU(10," Enable 2FA "),t.qZA()(),t.TgZ(11,"input",8),t.NdJ("keyup",function(a){return o.handleKeyPressOnPhoneInput(a)}),t.qZA(),t.YNc(12,Z,2,0,"button",9),t.YNc(13,x,3,0,"div",10),t.qZA()()()),2&e&&(t.xp6(5),t.Q6J("formGroup",o.phone2FAForm),t.xp6(2),t.Q6J("ngIf",!o.is2FAOn),t.xp6(1),t.Q6J("ngIf",o.is2FAOn),t.xp6(4),t.Q6J("ngIf",!o.hasPhoneNumberBeenSubmitted),t.xp6(1),t.Q6J("ngIf",o.hasPhoneNumberBeenSubmitted))},dependencies:[p.O5,r._Y,r.Fj,r.JJ,r.JL,r.sg,r.u]}),n})();function N(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"div")(1,"div",1)(2,"div",2)(3,"h5"),t._uU(4),t.qZA(),t.TgZ(5,"p")(6,"b"),t._uU(7,"Your IP Address:"),t.qZA(),t._uU(8),t.qZA(),t.TgZ(9,"p")(10,"b"),t._uU(11,"User Agent:"),t.qZA(),t._uU(12),t.qZA(),t.TgZ(13,"p")(14,"b"),t._uU(15,"Was This You?"),t.qZA()(),t.TgZ(16,"button",5),t.NdJ("click",function(){const a=t.CHM(e).$implicit,d=t.oxw(2);return t.KtG(d.handleWasThisMe(!0,a.id))}),t._uU(17,"Yes"),t.qZA(),t.TgZ(18,"button",6),t.NdJ("click",function(){const a=t.CHM(e).$implicit,d=t.oxw(2);return t.KtG(d.handleWasThisMe(!1,a.id))}),t._uU(19,"No"),t.qZA()()()()}if(2&n){const e=i.$implicit;t.xp6(4),t.AsE("",e.city,", ",e.country,""),t.xp6(4),t.hij(" ",e.ip,""),t.xp6(4),t.hij(" ",e.userAgent,"")}}function k(n,i){if(1&n&&(t.TgZ(0,"div",1)(1,"div",2)(2,"h3"),t._uU(3,"Successful Logins"),t.qZA()(),t.TgZ(4,"div",3),t.YNc(5,N,20,4,"div",4),t.qZA()()),2&n){const e=t.oxw();t.xp6(5),t.Q6J("ngForOf",e.successfulLogins)}}let S=(()=>{class n{constructor(e){this.http=e,this.successfulLogins=[]}ngOnInit(){this.getSuccessfulLogins()}getSuccessfulLogins(){this.http.getAuthenticated(u.N.apiUrl+"UserLogin/GetSuccessfulLogins").subscribe(e=>{this.successfulLogins=e.logins},e=>{})}handleWasThisMe(e,o){this.removeLoginFromDomList(o),this.http.postAuthenticated(u.N.apiUrl+"UserLogin/WasLoginMe",{LoginId:o,WasMe:e}).subscribe(s=>{console.log(s)},s=>{})}removeLoginFromDomList(e){for(let o=0;o<this.successfulLogins.length;o++)if(this.successfulLogins[o].id===e){this.successfulLogins.splice(o,1);break}}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(h.O))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-successful-logins"]],decls:1,vars:1,consts:[["class","card",4,"ngIf"],[1,"card"],[1,"card-title","text-center"],[1,"card-body"],[4,"ngFor","ngForOf"],[1,"btn","btn-primary",3,"click"],[1,"btn","btn-danger",3,"click"]],template:function(e,o){1&e&&t.YNc(0,k,6,1,"div",0),2&e&&t.Q6J("ngIf",o.successfulLogins.length>0)},dependencies:[p.sg,p.O5]}),n})(),I=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-user-home-navigation"]],decls:7,vars:0,consts:[[1,"list-group"],["aria-current","true","routerLink","/user-home/payment",1,"list-group-item","list-group-item-action"],["aria-current","true","routerLink","/user-home/twofactor",1,"list-group-item","list-group-item-action"],["aria-current","true","routerLink","/user-home/apikey",1,"list-group-item","list-group-item-action"]],template:function(e,o){1&e&&(t.TgZ(0,"ul",0)(1,"a",1),t._uU(2," Payment Information "),t.qZA(),t.TgZ(3,"a",2),t._uU(4," Two Factor Authentication "),t.qZA(),t.TgZ(5,"a",3),t._uU(6," API Access "),t.qZA()())},dependencies:[m.yS]}),n})();const P=[{path:"",component:(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-user-home"]],decls:7,vars:0,consts:[[1,"row"],[1,"col"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1),t._UZ(2,"app-user-home-navigation"),t.qZA(),t.TgZ(3,"div",1),t._UZ(4,"router-outlet"),t.qZA(),t.TgZ(5,"div",1),t._UZ(6,"app-successful-logins"),t.qZA()())},dependencies:[m.lC,S,I]}),n})(),canActivate:[l.P],children:[{path:"twofactor",component:U,canActivateChild:[l.P]},{path:"payment",component:C,canActivate:[l.P]},{path:"apikey",component:A,canActivate:[l.P]}]}];let w=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[m.Bz.forChild(P),m.Bz]}),n})(),L=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[p.ez,w,r.UX]}),n})()}}]);